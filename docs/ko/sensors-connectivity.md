---
title: 센서 연결성
contributors: [Vourhey, arinaml]
translated: true
---

이 Aira 패키지를 사용하면 SDS011 센서에서 데이터를 읽고 다른 출력 채널에 게시할 수 있습니다. 즉, Aira는 측정 값이 포함된 JSON 형식 메시지를 형성하고이를 몇 개의 채널에 게시할 수 있습니다. 또한 아직 실험적인 데이터 로그 기능도 포함되어 있습니다. Robonomics의 Substrate 기반 블록체인에 데이터를 게시하는 데 사용할 수 있습니다.

마지막 릴리스는 [Sensors Connectivity v0.2](https://github.com/airalab/sensors-connectivity/releases/tag/v0.2) 입니다.

## 센서 연결 프로토콜 :: V1

### 스테이션에 센서

**TCP 세션 다이어그램**

| HEADER | DATA1 | DATA2 | DATA3 | ... | DATAN |
|--------|-------|-------|-------|-----|-------|

여기서 `HEADER` 는 34 바이트입니다.

|      | Name      |
|------|-----------|
| 0x00 | public_id |
| 0x20 | codec_id  |

* `public_id` - 센서 설정시 생성되는 공용 식별자입니다.
* `codec_id` - 사용 된 데이터 코덱의 유형입니다.

**데이터 프레임**

|      | Name      |
|------|-----------|
| 0x22 | payload   |
| 0xNN | signature |


* `페이로드`-센서 측정.
* `서명`-측정 Ed25519 서명, 64 바이트 길. ([pynacl](https://github.com/pyca/pynacl))

SDS011의 경우 센서 페이로드는 PM2.5, PM10, GEO_LAT, GEO_LON의 4 가지 부동 숫자로 구성됩니다

### Robonomics 스테이션

기본 출력 채널은 IPFS pubsub를 통한 Robonomics 프로토콜입니다. 모든 측정 연결에 대해 다음과 같은 json 형식의 문자열이 생성됩니다:

```
{public_id: {"model": codec_id,"timestamp": unix_timestamp, "measurement": {"pm25": PM2.5, "pm10": PM10, "geo": "GEO_LAT,GEO_LON"}}}
```

## 스테이션 및 피더

센서 연결에는 스테이션과 피더의 두 가지 엔티티가 있습니다.

### 스테이션

스테이션은 데이터 소스를 나타냅니다. 패키지는 여러 입력을 동시에 처리 할 수 있습니다:

```
station1 \                        / output1
station2 -  sensors-connectivity  - output2
station3 /                        \ output3
```

COM 스테이션 과 TCP 스테이션이 구현되어 있습니다. 첫 번째는 직렬 포트에 연결된 센서에서 데이터를 읽습니다. TCP Station은 TCP 서버를 시작하고 들어오는 연결을 수신합니다.

TCP 스테이션은 모든 센서의 데이터를 수락하거나 알려진 센서에 대해서만 액세스 제어 목록 (ACL)을 지정할 수 있습니다.

### 피더

피더는 센서 연결 측면에서 출력입니다:

```
input1 \                        / feeder1
input2 -  sensors-connectivity  - feeder2
input3 /                        \ feeder3
```

현재 구현에서 패키지는 [Luftdaten](https://meine.luftdaten.info/), Robonomics 또는 Robonomics on Substrate에 데이터를 게시 할 수 있습니다 (데이터 로그 기능 사용).

## 연결 구성

패키지는 고도로 구성 가능합니다. 기본 구성 파일은 다음과 같습니다:

```yaml
# Please DO NOT edit this file
# Make a copy instead, make changes and pass the absolute path to the copy in arguments
general:
  publish_interval: 300 # time between two published messages
comstation:
  port: "/dev/ttyUSB0"  # COM port of the device
  work_period: 300      # time between two measurements in seconds
  geo: ""               # Geo coordinates as latitude,longitude
  public_key: ""        # If not provided, COMStation creates itself
tcpstation:
  address: ""           # IP and PORT to listen to, for example 0.0.0.0:31313
  acl:                  # list of known addresses. If not specified accepts from everyone
  # -
  # -
luftdaten:
  enable: true          # whether or not publish to https://luftdaten.info/
robonomics:
  enable: true          # enable use of Robonomics Network
  ipfs_provider: ""     # ipfs endpoint
  ipfs_topic: "airalab.lighthouse.5.robonomics.eth"
datalog:
  enable: false         # enable use of Datalog Robonomics subcommand
  path: ""              # path to Robonomics execution file
  suri: ""              # private key of publisher account
  remote: "wss://substrate.ipci.io"
  dump_interval: 3600   # time between two transactions in seconds
  temporal_username:    # set to pin files in Temporal.Cloud
  temporal_password:
dev:
  sentry: ""
```

모든 옵션과 시작 시나리오에 익숙해 지려면 [README.md](https://github.com/airalab/sensors-connectivity/tree/v0.2)를 확인하시기 바랍니다.